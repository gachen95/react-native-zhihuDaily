> ## 目录结构
```
├─assets 资源文件夹
│  ├─images  图像资源
│  └─video   视频文件
├─componetns  组件文件夹
│  ├─AvatarPicker  头像选择
│  ├─Bar   进度条
│  ├─CountDownButton  倒计时按钮
│  ├─ProgressBarModal  下载进度弹层
│  ├─PullUpLoading  下拉加载
│  ├─ScrollView    集成上拉刷新和下拉加载的ScrollView
│  └─StoriesList 公共日报列表
├─pages  页面文件夹
│  ├─Comment 评论页
│  ├─Details 详情页
│  ├─Drawer  侧边栏
│  ├─Home    首页
│  ├─ImgView 图像缩放下载
│  ├─Login    登录
│  ├─Registered 注册
│  ├─Section  栏目
│  └─Setting  设置
├─routers  路由文件夹
│ └─AppRouter.js APP主路由
├─store 状态管理仓库文件夹
│  ├─index.js 导出Store
│  └─ThemeStore.js 主题Store
├─theme  主题文件夹
│  ├─ blackTheme.js 夜间主题配色 
│  └─ defaultTheme.js 默认主题配色
├─utils 工具和配置文件夹
│  ├─ api.js  API配置文件
│  ├─ axios.js Axios配置文件
│  ├─ fontSize.js 字体缩放适配
│  ├─ index.js  统一导出各工具组件
│  ├─ storage.js  本地存储初始化配置文件
│  ├─ strageSync.js 本地存储同步远程数据函数
|  ├─ system.js   获取系统信息
|  └─ tools.js 工具函数 
|   
|_ App.js  应用根节点

```
## 应用入口
    
   - App.js (应用根节点)
   - AppRouter.js (应用主导航)


 ### App.js
   >App.js是整个应用的根级组件 , 在这个组件中主要挂载了一些全局功能组件, 包括: 热更新 , 本地存储 , 极光推送等.
 ### AppRouter.js
   > AppRouter中结合react-navigation框架, 声明应用的路由导航信息 , 并导出到给Root.js使用 . 其中路由导航是一个两级嵌套结构 , 外层为抽屉导航(DrawerNavigator) , 实现侧边栏抽屉与主页面的切换.主页面(Home)中嵌套一个堆栈导航(StackNavigator) , 用于实现页面之间的跳转功能 .
   

   需要注意的 , 在抽屉导航绑定焦点事件中 , 使用DeviceEventEmitter作为事件通知.  
   DeviceEventEmitter在用于解决跨页面之间事件通知时很方便 . 列如 我在A页面触发一个事件 , 希望B页面也能接收到时,就可以用到DeviceEventEmitter .

### store 
    
  > App应用中使用 Mobx 作为状态管理工具 , Mobx个人感觉比Redux更简单一点 . 应用中仅主题切换功能使用了Mobx .
     
  - index.js 主要用于将多个Store库汇集成一个对象导出 , 因为项目中仅有一个Store , 也可以忽略掉.
  - ThemeStore.js 主题Store , 声明主题切换的action方法
   
  
  #### 扩展阅读
  1. [React小书](http://huziketang.mangojuice.top/books/react/lesson1)
  2. [慕课网Mobx入门视频教程](https://www.imooc.com/learn/1012)
  3. [Mobx中文网文档](https://cn.mobx.js.org/)
 
### utils
  > utils中包含API , 本地存储配置文件 , 以及tools等工具函数 .  这里还封装了```Axios```用于替代```Fetch```做htttp数据请求 , 主要因为 Fetch 功能太少了 , 先请求超时都要自己实现.

### theme
  > 包含默认和夜间的主题配色信息

##  全局组件

  ### AvatarPicker (头像选择组件)
  
  >结合 react-native-actionsheet 行动表组件  , react-native-image-picker 图像选择组件 ,  react-native-image-crop-picker 图像裁切组件 , 实现一个图像选择到裁切的用户头像选取组件. 
  
  ### Bar (进度条组件)
  
  > 实现动画进度条 ,  用于配合 ProgressBarModal(下载进度组件)

  ###  CountDownButton (倒计时按钮组件)

  >倒计时按钮封装 , 主要用于点击获取验证码时的倒计时按钮.

  ###  ProgressBarModal (下载进度条弹层)

  > 用于热更新时显示下载进度

  ###  PullUpLoading (下拉加载状态组件)

  > 用于下载刷新时 , 在列表底部显示"正在加载"或"没有更多了"等文字信息

  ###  ScrollView (滚动容器组件)
  
  >  此ScrollView中组件封装了上拉刷新和下拉触底的方法

  ###  StoriesList (日报列表组件)

  > 日报列表组件


 ##  页面功能实现  
    
  ### Home (首页)
   >Home是整个应用相对复杂的页面 , 从上到下可以分为三个部分 : 导航栏 , 轮播图 , 日报列表 . 这三个部分中还结合一些小功能 , 导致代码量较多 ,  这里分部分说明各功能的实现.

   -  导航栏  

      导航栏由react-navigation提供 , 这里没有选择手动实现 . navigationOptions中配置标题,背景色为动态获取 . 并通过react-native-elements增加左右的按钮和图标 . 需要注意的 , navigationOptions中无法通过this访问组件内的状态和函数 , 列如: ```this.state.xxx```或者```this.xxx()``` 都是不行的, 只能 通过```this.props.navigation.setParams```传参的方式 ,  有时通过保存```this```引用为```that```也阔以解决.
   
   -  轮播图
      
      轮播图是相对独立的部分与其他组件没有太复杂的交互 , 这里我将其独立为单独的文件 . 主要通过react-native-swiper实现 , 结合react-native-linear-gradient实现背景渐变的效果 . 文字悬浮在背景层上这里是通过样式的绝对定位和zIndex实现的 , 不使用样式下```<ImageBackground>``` 组件应该也可以实现.
   
   -  日报列表
       
      日报列表是应用中复用较多的部分 , 这里将其抽离成组件 . 同时也将ScrollView抽离成组件 , 这样仅需要为日报列表绑定数据源和点击事件并为下拉和上拉加载绑定对应方法 , 而不必关注其内部实现 . 

   -  其他功能

      -  主题切换
         
         这里主要涉及Mobx的使用 ,  在组件头部顶部引入主题仓库 , @observer标记组件为可观察的 . 
         ```javascript
            @inject('theme')
            @observer
         ``` 
         在点击切换按钮时 , 触发theme中action行为事件即可实现切换主题效果.

      -  标题跟随滚动切换

         首先每天日报都有一个时间标题 , 需要实现当滚动到日报区域时 , 对应导航条标题切换到当天时间标题. 实现原理 : ```<View>```组件有一个```onLayout```方法 ,当```View```高度宽度发生变化时 可以触发并返回新的高宽度 . 通过记录高度区间为一个数组, 每次滚动时判断当前在哪个高度区间 , 既可得出当前日报区域的日期.
         
      -  其他
         
         包括日期选择 , 弹出层组件 , 只是一些组件的基本使用 , 不在赘述.
  
  ###   Details (详情页) 

  > 详情页主要涉及 WebView和动画的使用










